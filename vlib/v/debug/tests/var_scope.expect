#!/usr/bin/env expect
source "common.tcl"

expect "Break on * main in ${test_file}:6"
expect "${test_file}:6 vdbg> "
send "scope\n"
expect "a = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:11"
expect "${test_file}:11 vdbg> "
send "scope\n"
expect "e = 3 (int)"
expect "a = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:21"
expect "${test_file}:21 vdbg> "
send "scope\n"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:26"
expect "${test_file}:26 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:31"
expect "${test_file}:31 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:34"
expect "${test_file}:34 vdbg> "
send "scope\n"
expect "a = 1 (int)"
expect "b = 2 (int)"
expect "z = 0 (int)"
expect "x = 1 (int)"
send "c\n"
expect "Break on * main in ${test_file}:40"
expect "${test_file}:40 vdbg> "
send "scope\n"
expect "y = 1 (int)"
expect "x = 1 (int)"
send "c\n"
expect eof
