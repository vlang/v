{c_module,[],{c_literal,[],'v.sync.pool'},[{c_var,[],{'empty_cb',3}},{c_var,[],{'new_pool_processor',1}},{c_var,[],{'PoolProcessor.set_max_jobs',2}},{c_var,[],{'PoolProcessor.work_on_items',2}},{c_var,[],{'PoolProcessor.work_on_pointers',2}},{c_var,[],{'process_in_thread',2}},{c_var,[],{'atomic_fetch_add_ntask',1}},{c_var,[],{'PoolProcessor.get_item',2}},{c_var,[],{'PoolProcessor.get_result',2}},{c_var,[],{'PoolProcessor.get_results',1}},{c_var,[],{'PoolProcessor.get_results_ref',1}},{c_var,[],{'PoolProcessor.set_shared_context',2}},{c_var,[],{'PoolProcessor.get_shared_context',1}},{c_var,[],{'PoolProcessor.set_thread_context',3}},{c_var,[],{'PoolProcessor.get_thread_context',2}},{c_var,[],{'module_info',0}},{c_var,[],{'module_info',1}}],[],[{{c_var,[],{'empty_cb',3}},{c_fun,[],[{c_var,[],'_p'},{c_var,[],'_idx'},{c_var,[],'_task_id'}],{c_literal,[],'ok'}}},{{c_var,[],{'new_pool_processor',1}},{c_fun,[],[{c_var,[],'Context'}],{c_seq,[],{c_case,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'=:='},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'callback'}, {c_var,[],'Context'}]}, {c_literal,[],'nil'}]},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],true},{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'error'},[{c_tuple,[],[{c_literal,[],'panic'}, {c_literal,[],<<"You need to pass a valid callback to new_pool_processor.">>}]}]}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],true},{c_literal,[],'ok'}}]},{c_let,[],[{c_var,[],'Pool'}],{c_call,[],{c_literal,[],'maps'},{c_literal,[],'from_list'},[{c_cons,[],{c_tuple,[],[{c_literal,[],'items'}, {c_literal,[],[]}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'results'}, {c_literal,[],[]}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'shared_context'}, {c_literal,[],'nil'}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'thread_contexts'}, {c_literal,[],[]}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'njobs'}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'maxjobs'}, {c_var,[],'Context'}]}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'ntask'}, {c_literal,[],0}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'thread_cb'}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'callback'}, {c_var,[],'Context'}]}]},{c_cons,[],{c_tuple,[],[{c_tuple,[],[{c_literal,[],'vbeam'}, {c_literal,[],'type'}]}, {c_literal,[],'PoolProcessor'}]},{c_literal,[],[]}}}}}}}}}]},{c_seq,[],{c_apply,[],{c_var,[],{'WaitGroup.init',1}},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'waitgroup'}, {c_var,[],'Pool'}]}]},{c_var,[],'Pool'}}}}}},{{c_var,[],{'PoolProcessor.set_max_jobs',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Njobs'}],{c_literal,[],'ok'}}},{{c_var,[],{'PoolProcessor.work_on_items',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Items'}],{c_apply,[],{c_var,[],{'PoolProcessor.work_on_pointers',2}},[{c_var,[],'Pool'}, {c_apply,[],{c_var,[],{'array.pointers',1}},[{c_var,[],'Items'}]}]}}},{{c_var,[],{'PoolProcessor.work_on_pointers',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Items'}],{c_let,[],[{c_var,[],'Njobs'}],{c_call,[],{c_literal,[],'v.runtime'},{c_literal,[],'nr_jobs'},[]},{c_let,[],[{c_var,[],'Njobs_1'}],{c_case,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'>'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'njobs'}, {c_var,[],'Pool'}]}, {c_literal,[],0}]},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],true},{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'njobs'}, {c_var,[],'Pool'}]}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],true},{c_var,[],'Njobs'}}]},{c_let,[],[{c_var,[],'Njobs_2'}],{c_case,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'>'},[{c_var,[],'Njobs_1'}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'length'},[{c_var,[],'Items'}]}]},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],true},{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'length'},[{c_var,[],'Items'}]}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],true},{c_var,[],'Njobs_1'}}]},{c_let,[],[{c_var,[],'Njobs_3'}],{c_case,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'<'},[{c_var,[],'Njobs_2'}, {c_literal,[],1}]},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],true},{c_literal,[],1}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],true},{c_var,[],'Njobs_2'}}]},{c_literal,[],'ok'}}}}}}},{{c_var,[],{'process_in_thread',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Task_id'}],{c_let,[],[{c_var,[],'Cb'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'thread_cb'}, {c_var,[],'Pool'}]},{c_let,[],[{c_var,[],'Ilen'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'length'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'items'}, {c_var,[],'Pool'}]}]},{c_letrec,[],[{{c_var,[],{'loop_1',0}},{c_fun,[],[],{c_case,[],{c_literal,[],'false'},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],'true'},{c_seq,[],{c_let,[],[{c_var,[],'Idx'}],{c_apply,[],{c_var,[],{'atomic_fetch_add_ntask',1}},[{c_var,[],'Pool'}]},{c_var,[],'Idx'}},{c_seq,[],{c_case,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'>='},[{c_var,[],'Idx'}, {c_var,[],'Ilen'}]},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],true},{c_literal,[],'ok'}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],true},{c_literal,[],'ok'}}]},{c_seq,[],{c_let,[],[{c_var,[],'Res'}],{c_apply,[],{c_var,[],'Cb'},[{c_var,[],'Pool'}, {c_var,[],'Idx'}, {c_var,[],'Task_id'}]},{c_var,[],'Res'}},{c_seq,[],{c_literal,[],'false'},{c_apply,[],{c_var,[],{'loop_1',0}},[]}}}}}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],'true'},{c_literal,[],'ok'}}]}}}],{c_seq,[],{c_apply,[],{c_var,[],{'loop_1',0}},[]},{c_literal,[],'ok'}}}}}}},{{c_var,[],{'atomic_fetch_add_ntask',1}},{c_fun,[],[{c_var,[],'Pool'}],{c_let,[],[{c_var,[],'Old'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'ntask'}, {c_var,[],'Pool'}]},{c_seq,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'ntask'}, {c_var,[],'Pool'}]},{c_var,[],'Old'}}}}},{{c_var,[],{'PoolProcessor.get_item',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Idx'}],{c_call,[],{c_literal,[],'lists'},{c_literal,[],'nth'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'+'},[{c_var,[],'Idx'}, {c_literal,[],1}]}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'items'}, {c_var,[],'Pool'}]}]}}},{{c_var,[],{'PoolProcessor.get_result',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Idx'}],{c_literal,[],'false'}}},{{c_var,[],{'PoolProcessor.get_results',1}},{c_fun,[],[{c_var,[],'Pool'}],{c_let,[],[{c_var,[],'Res'}],{c_literal,[],[]},{c_seq,[],{c_let,[],[{c_var,[],'_1'}],{c_fun,[],[{c_var,[],'I'}],{c_literal,[],'false'}},{c_let,[],[{c_var,[],'_2'}],{c_call,[],{c_literal,[],'lists'},{c_literal,[],'seq'},[{c_literal,[],0}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'-'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'length'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'results'}, {c_var,[],'Pool'}]}]}, {c_literal,[],1}]}]},{c_call,[],{c_literal,[],'lists'},{c_literal,[],'foreach'},[{c_var,[],'_1'}, {c_var,[],'_2'}]}}},{c_var,[],'Res'}}}}},{{c_var,[],{'PoolProcessor.get_results_ref',1}},{c_fun,[],[{c_var,[],'Pool'}],{c_let,[],[{c_var,[],'Res'}],{c_literal,[],[]},{c_seq,[],{c_let,[],[{c_var,[],'_1'}],{c_fun,[],[{c_var,[],'I'}],{c_literal,[],'false'}},{c_let,[],[{c_var,[],'_2'}],{c_call,[],{c_literal,[],'lists'},{c_literal,[],'seq'},[{c_literal,[],0}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'-'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'length'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'results'}, {c_var,[],'Pool'}]}]}, {c_literal,[],1}]}]},{c_call,[],{c_literal,[],'lists'},{c_literal,[],'foreach'},[{c_var,[],'_1'}, {c_var,[],'_2'}]}}},{c_var,[],'Res'}}}}},{{c_var,[],{'PoolProcessor.set_shared_context',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Context'}],{c_literal,[],'ok'}}},{{c_var,[],{'PoolProcessor.get_shared_context',1}},{c_fun,[],[{c_var,[],'Pool'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'shared_context'}, {c_var,[],'Pool'}]}}},{{c_var,[],{'PoolProcessor.set_thread_context',3}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Idx'},{c_var,[],'Context'}],{c_literal,[],'ok'}}},{{c_var,[],{'PoolProcessor.get_thread_context',2}},{c_fun,[],[{c_var,[],'Pool'},{c_var,[],'Idx'}],{c_call,[],{c_literal,[],'lists'},{c_literal,[],'nth'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'+'},[{c_var,[],'Idx'}, {c_literal,[],1}]}, {c_call,[],{c_literal,[],'erlang'},{c_literal,[],'map_get'},[{c_literal,[],'thread_contexts'}, {c_var,[],'Pool'}]}]}}},{{c_var,[],{'module_info',0}},{c_fun,[],[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'get_module_info'},[{c_literal,[],'v.sync.pool'}]}}},{{c_var,[],{'module_info',1}},{c_fun,[],[{c_var,[],'_0'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'get_module_info'},[{c_literal,[],'v.sync.pool'}, {c_var,[],'_0'}]}}}]}