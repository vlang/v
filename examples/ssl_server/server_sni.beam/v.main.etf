{c_module,[],{c_literal,[],'v.main'},[{c_var,[],{'get_cert',2}},{c_var,[],{'main',0}},{c_var,[],{'module_info',0}},{c_var,[],{'module_info',1}}],[],[{{c_var,[],{'get_cert',2}},{c_fun,[],[{c_var,[],'_listener'},{c_var,[],'Host'}],{c_seq,[],{c_call,[],{c_literal,[],'io'},{c_literal,[],'format'},[{c_literal,[],"~s~n"}, {c_cons,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"reading certificates for ">>},{c_cons,[],{c_var,[],'Host'},{c_cons,[],{c_literal,[],<<" ...">>},{c_literal,[],[]}}}}]},{c_literal,[],[]}}]},{c_let,[],[{c_var,[],'Cert'}],{c_try,[],{c_call,[],{c_literal,[],'file'},{c_literal,[],'read_file'},[{c_literal,[],<<"cert/server.crt">>}]},[{c_var,[],'_cor1'}],{c_var,[],'_cor1'},[{c_var,[],'_cor_c1'},{c_var,[],'_cor_r1'},{c_var,[],'_cor_s1'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'error'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"Failed to read certificate ">>},{c_cons,[],{c_var,[],'Host'},{c_cons,[],{c_literal,[],<<": ">>},{c_cons,[],{c_var,[],'Err'},{c_literal,[],[]}}}}}]}]}},{c_let,[],[{c_var,[],'Key'}],{c_try,[],{c_call,[],{c_literal,[],'file'},{c_literal,[],'read_file'},[{c_literal,[],<<"cert/server.key">>}]},[{c_var,[],'_cor2'}],{c_var,[],'_cor2'},[{c_var,[],'_cor_c2'},{c_var,[],'_cor_r2'},{c_var,[],'_cor_s2'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'error'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"Failed to read key ">>},{c_cons,[],{c_var,[],'Host'},{c_cons,[],{c_literal,[],<<": ">>},{c_cons,[],{c_var,[],'Err'},{c_literal,[],[]}}}}}]}]}},{c_seq,[],{c_call,[],{c_literal,[],'io'},{c_literal,[],'format'},[{c_literal,[],"~s~n"}, {c_cons,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"read certs for ">>},{c_cons,[],{c_var,[],'Host'},{c_literal,[],[]}}}]},{c_literal,[],[]}}]},{c_case,[],{c_try,[],{c_call,[],{c_literal,[],'v.net.mbedtls'},{c_literal,[],'new_sslcerts_in_memory'},[{c_literal,[],<<"">>}, {c_var,[],'Cert'}, {c_var,[],'Key'}]},[{c_var,[],'_cor3'}],{c_tuple,[],[{c_literal,[],'ok'}, {c_var,[],'_cor3'}]},[{c_var,[],'_cor_c'},{c_var,[],'_cor_r'},{c_var,[],'_cor_s'}],{c_literal,[],'error'}},[{c_clause,[],[{c_tuple,[],[{c_literal,[],'ok'}, {c_var,[],'C'}]}],{c_literal,[],true},{c_var,[],'C'}},{c_clause,[],[{c_var,[],'_'}],{c_literal,[],true},{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'error'},[{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"mbedtls.new_sslcerts_in_memory err: ">>},{c_cons,[],{c_var,[],'Err'},{c_literal,[],[]}}}]}]}}]}}}}}}},{{c_var,[],{'main',0}},{c_fun,[],[],{c_let,[],[{c_var,[],'Server'}],{c_try,[],{c_call,[],{c_literal,[],'v.net.mbedtls'},{c_literal,[],'new_ssl_listener'},[{c_literal,[],<<"0.0.0.0:8443">>}, {c_call,[],{c_literal,[],'maps'},{c_literal,[],'from_list'},[{c_cons,[],{c_tuple,[],[{c_literal,[],'verify'}, {c_literal,[],<<"cert/ca.crt">>}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'cert'}, {c_literal,[],<<"cert/server.crt">>}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'cert_key'}, {c_literal,[],<<"cert/server.key">>}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'validate'}, {c_literal,[],'false'}]},{c_cons,[],{c_tuple,[],[{c_literal,[],'get_certificate'}, {c_fun,[],[{c_var,[],'_fref0'},{c_var,[],'_fref1'}],{c_call,[],{c_literal,[],'v.main'},{c_literal,[],'get_cert'},[{c_var,[],'_fref0'}, {c_var,[],'_fref1'}]}}]},{c_cons,[],{c_tuple,[],[{c_tuple,[],[{c_literal,[],'vbeam'}, {c_literal,[],'type'}]}, {c_literal,[],'SSLConnectConfig'}]},{c_literal,[],[]}}}}}}}]}]},[{c_var,[],'_cor1'}],{c_var,[],'_cor1'},[{c_var,[],'_cor_c1'},{c_var,[],'_cor_r1'},{c_var,[],'_cor_s1'}],{c_literal,[],'ok'}},{c_seq,[],{c_call,[],{c_literal,[],'io'},{c_literal,[],'format'},[{c_literal,[],"~s~n"}, {c_cons,[],{c_literal,[],<<"Listening on https://0.0.0.0:8443/ ...">>},{c_literal,[],[]}}]},{c_letrec,[],[{{c_var,[],{'loop_2',0}},{c_fun,[],[],{c_case,[],{c_literal,[],'false'},[{c_clause,[],[{c_literal,[],'true'}],{c_literal,[],'true'},{c_seq,[],{c_let,[],[{c_var,[],'Client'}],{c_try,[],{c_apply,[],{c_var,[],{'SSLListener.accept',1}},[{c_var,[],'Server'}]},[{c_var,[],'_cor3'}],{c_var,[],'_cor3'},[{c_var,[],'_cor_c3'},{c_var,[],'_cor_r3'},{c_var,[],'_cor_s3'}],{c_seq,[],{c_call,[],{c_literal,[],'io'},{c_literal,[],'format'},[{c_literal,[],"~s~n"}, {c_cons,[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'iolist_to_binary'},[{c_cons,[],{c_literal,[],<<"accept error: ">>},{c_cons,[],{c_var,[],'Err'},{c_literal,[],[]}}}]},{c_literal,[],[]}}]},{c_literal,[],'ok'}}},{c_var,[],'Client'}},{c_seq,[],{c_let,[],[{c_var,[],'Reader'}],{c_literal,[],'undefined'},{c_var,[],'Reader'}},{c_seq,[],{c_literal,[],'ok'},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.write_string',2}},[{c_var,[],'Client'}, {c_literal,[],<<"HTTP/1.1 200 OK\\r\\n">>}]},[{c_var,[],'_cor4'}],{c_var,[],'_cor4'},[{c_var,[],'_cor_c4'},{c_var,[],'_cor_r4'},{c_var,[],'_cor_s4'}],{c_literal,[],'ok'}},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.write_string',2}},[{c_var,[],'Client'}, {c_literal,[],<<"Content-Type: text/html\\r\\n">>}]},[{c_var,[],'_cor5'}],{c_var,[],'_cor5'},[{c_var,[],'_cor_c5'},{c_var,[],'_cor_r5'},{c_var,[],'_cor_s5'}],{c_literal,[],'ok'}},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.write_string',2}},[{c_var,[],'Client'}, {c_literal,[],<<"Connection: close\\r\\n">>}]},[{c_var,[],'_cor6'}],{c_var,[],'_cor6'},[{c_var,[],'_cor_c6'},{c_var,[],'_cor_r6'},{c_var,[],'_cor_s6'}],{c_literal,[],'ok'}},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.write_string',2}},[{c_var,[],'Client'}, {c_literal,[],<<"\\r\\n">>}]},[{c_var,[],'_cor7'}],{c_var,[],'_cor7'},[{c_var,[],'_cor_c7'},{c_var,[],'_cor_r7'},{c_var,[],'_cor_s7'}],{c_literal,[],'ok'}},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.write_string',2}},[{c_var,[],'Client'}, {c_literal,[],<<"Hello\\n">>}]},[{c_var,[],'_cor8'}],{c_var,[],'_cor8'},[{c_var,[],'_cor_c8'},{c_var,[],'_cor_r8'},{c_var,[],'_cor_s8'}],{c_literal,[],'ok'}},{c_seq,[],{c_try,[],{c_apply,[],{c_var,[],{'SSLConn.shutdown',1}},[{c_var,[],'Client'}]},[{c_var,[],'_cor9'}],{c_var,[],'_cor9'},[{c_var,[],'_cor_c9'},{c_var,[],'_cor_r9'},{c_var,[],'_cor_s9'}],{c_literal,[],'ok'}},{c_apply,[],{c_var,[],{'loop_2',0}},[]}}}}}}}}}}},{c_clause,[],[{c_literal,[],'false'}],{c_literal,[],'true'},{c_literal,[],'ok'}}]}}}],{c_seq,[],{c_apply,[],{c_var,[],{'loop_2',0}},[]},{c_try,[],{c_apply,[],{c_var,[],{'SSLListener.shutdown',1}},[{c_var,[],'Server'}]},[{c_var,[],'_cor10'}],{c_var,[],'_cor10'},[{c_var,[],'_cor_c10'},{c_var,[],'_cor_r10'},{c_var,[],'_cor_s10'}],{c_literal,[],'ok'}}}}}}}},{{c_var,[],{'module_info',0}},{c_fun,[],[],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'get_module_info'},[{c_literal,[],'v.main'}]}}},{{c_var,[],{'module_info',1}},{c_fun,[],[{c_var,[],'_0'}],{c_call,[],{c_literal,[],'erlang'},{c_literal,[],'get_module_info'},[{c_literal,[],'v.main'}, {c_var,[],'_0'}]}}}]}